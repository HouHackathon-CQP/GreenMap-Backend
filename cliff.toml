# git-cliff ~ configuration file
# https://git-cliff.org/docs/configuration
# GreenMap Backend - Professional Changelog Configuration

[changelog]
header = """
# Changelog

All notable changes to the **GreenMap Backend** project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

"""

body = """
{% if version %}\
    {% if previous %}\
        {% if previous.commit_id %}\
            ## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
        {% endif %}\
    {% else %}\
        ## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
    {% endif %}\
{% else %}\
    ## [Unreleased]
{% endif %}\
{% if version and previous and previous.commit_id %}\

All changes: [`{{ previous.version }}..{{ version }}`](https://github.com/HouHackathon-CQP/GreenMap-Backend/compare/{{ previous.version }}..{{ version }})
{% endif %}\
{% macro print_commit(commit) -%}
    - {% if commit.scope %}**{{ commit.scope }}**: {% endif %}{{ commit.message | split(pat="\n") | first | trim }}\
        {% if commit.author.email == "100331812+ourstorycomic@users.noreply.github.com" %} - [@ourstorycomic](https://github.com/ourstorycomic)\
        {% elif commit.author.email == "nolove011112@gmail.com" %} - [@kedokato-dev](https://github.com/kedokato-dev)\
        {% elif commit.author.email == "125746822+kedokato-dev@users.noreply.github.com" %} - [@kedokato-dev](https://github.com/kedokato-dev)\
        {% elif commit.author.email == "quanbtrsci@gmail.com" %} - [@quanta1999](https://github.com/quanta1999)\
        {% elif commit.author.email == "quanta@talent.apero.vn" %} - [@quanta1999](https://github.com/quanta1999)\
        {% elif commit.author.email == "chien.tt.dev@gmail.com" %} - [@blueMonkey23](https://github.com/blueMonkey23)\
        {% elif commit.author.email == "trantrongchien05@gmail.com" %} - [@blueMonkey23](https://github.com/blueMonkey23)\
        {% elif commit.author.email == "168514215+blueMonkey23@users.noreply.github.com" %} - [@blueMonkey23](https://github.com/blueMonkey23)\
        {% elif commit.author.name == "HouHackathon-CQP" %} - @HouHackathon-CQP\
        {% else %} - {{ commit.author.name }}\
        {% endif %} in [`{{ commit.id | truncate(length=7, end="") }}`](https://github.com/HouHackathon-CQP/GreenMap-Backend/commit/{{ commit.id }})
{%- endmacro -%}
{% if commits | filter(attribute="breaking", value=true) %}

### âš ï¸ BREAKING CHANGES
{% for commit in commits | filter(attribute="breaking", value=true) -%}
{{ self::print_commit(commit=commit) }}
{% endfor -%}
{% endif -%}
{% for group, commits in commits | filter(attribute="breaking", value=false) | group_by(attribute="group") %}

### {{ group | striptags | trim | upper_first }}
{% for commit in commits -%}
{{ self::print_commit(commit=commit) }}
{% endfor -%}
{% endfor -%}

"""

footer = """
---

*Changelog generated by [git-cliff](https://git-cliff.org). For contribution guidelines, see [CONTRIBUTING.md](CONTRIBUTING.md).*
"""

trim = true

postprocessors = [
  { pattern = '\((\w+\s)?#([0-9]+)\)', replace = "([#${2}](https://github.com/HouHackathon-CQP/GreenMap-Backend/issues/${2}))" },
]

[git]
conventional_commits = true
filter_unconventional = false
split_commits = false

commit_preprocessors = [
  { pattern = '\((\w+\s)?#([0-9]+)\)', replace = "" },
  { pattern = '`', replace = "" },
]

commit_parsers = [
  { message = "^feat", group = "<!-- 0 -->ğŸš€ Features" },
  { message = "^fix", group = "<!-- 1 -->ğŸ› Bug Fixes" },
  { message = "^doc", group = "<!-- 2 -->ğŸ“š Documentation" },
  { message = "^perf", group = "<!-- 3 -->âš¡ Performance" },
  { message = "^refactor", group = "<!-- 4 -->â™»ï¸ Refactor" },
  { message = "^style", group = "<!-- 5 -->ğŸ¨ Styling" },
  { message = "^test", group = "<!-- 6 -->ğŸ§ª Testing" },
  { message = "^build", group = "<!-- 7 -->ğŸ“¦ Build" },
  { message = "^ci", group = "<!-- 8 -->ğŸ‘· CI/CD" },
  { message = "^chore\\(release\\): prepare for", skip = true },
  { message = "^chore\\(deps.*\\)", skip = true },
  { message = "^chore\\(pr\\)", skip = true },
  { message = "^chore\\(pull\\)", skip = true },
  { message = "^chore", group = "<!-- 9 -->âš™ï¸ Miscellaneous Tasks" },
  { body = ".*security", group = "<!-- 10 -->ğŸ”’ Security" },
  { message = "^revert", group = "<!-- 11 -->âª Revert" },
  { message = ".*", group = "<!-- 12 -->ğŸ“ Other Changes" },
]

protect_breaking_commits = true
filter_commits = false
tag_pattern = "v[0-9]*"
skip_tags = ""
ignore_tags = ""
topo_order = false
sort_commits = "oldest"
